# 3-4 可靠数据传输算法的性能比对实验(基于3-1,2,3)

> 1811464

## 关于测试手段

本实验使用路由器程序`router.exe`与在程序中添加以下的代码来实现

```c++
int begintime = clock();
//数据传输过程代码
int endtime = clock();
int runtime = (endtime-begintime)*1000/CLOCKS_PER_SEC;
printf("transferring over\n");
printf("file transferring %d ms\n",runtime);
double Mbps=(len*8.0)/(runtime*100);
printf("transferring throughput: %f Mbps\n\n",Mbps);
```

其中,`runtime`指时延,`throughput`指代吞吐率,`len`为全局变量,指代整个数据包的字节数.


## 停等机制与滑动窗口性能比较

### 性能数据

| 机制     | 丢包率 | 延迟时间 | 吞吐率   | 时延 |
| -------- | ------ | -------- | -------- | ---- |
| 停等机制 | 0%     | 0ms      | 1000Mbps |      |
| 停等机制 | 2%     | 0ms      |          |      |
| 停等机制 | 4%     | 0ms      |          |      |
| 停等机制 | 0%     | 10ms     |          |      |
| 停等机制 | 0%     | 20ms     |          |      |
| 滑动窗口 | 0%     | 0ms      |          |      |
| 滑动窗口 | 2%     | 0ms      |          |      |
| 滑动窗口 | 4%     | 0ms      |          |      |
| 滑动窗口 | 0%     | 10ms     |          |      |
| 滑动窗口 | 0%     | 20ms     |          |      |

### 图形结果



### 数据分析

从性能数据来看,滑动窗口机制下吞吐率远大于停等机制,时延也远低于停等机制.这说明滑动窗口机制对性能的确有巨大提升



## 滑动窗口机制中不同窗口大小性能比较

### 性能数据

| 窗口大小   | 丢包率 | 延迟时间 | 吞吐率 | 时延 |
| ---------- | ------ | -------- | ------ | ---- |
| 10*MAXLEN  | 0%     | 0ms      |        |      |
| 10*MAXLEN  | 2%     | 0ms      |        |      |
| 10*MAXLEN  | 0%     | 10ms     |        |      |
| 100*MAXLEN | 0%     | 0ms      |        |      |
| 100*MAXLEN | 2%     | 0ms      |        |      |
| 100*MAXLEN | 0%     | 10ms     |        |      |

- 上图中`MAXLEN`指代一个数据包的最大字节数(不含数据包的头)

### 图形结果



### 数据分析

从性能数据来看,滑动窗口大小较大时,吞吐率较大,时延较小,表示窗口大小增大有利于滑动窗口机制性能提升.



## 有无拥塞机制的不同情况下的性能比较

### 性能数据

| 有无拥塞机制 | 丢包率 | 延迟时间 | 吞吐率 | 时延 |
| ------------ | ------ | -------- | ------ | ---- |
| 无           | 0%     | 0ms      |        |      |
| 无           | 2%     | 0ms      |        |      |
| 无           | 0%     | 10ms     |        |      |
| 有           | 0%     | 0ms      |        |      |
| 有           | 2%     | 0ms      |        |      |
| 有           | 0%     | 10ms     |        |      |

### 图形结果



### 数据分析

从性能数据来看,再有拥塞机制的情况下,吞吐率较大,时延较小,表示拥塞窗口机制有利于滑动窗口机制性能提升.